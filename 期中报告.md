# 期中报告

### 一、 GitBook的安装以及Git的安装  

学会了Markdown的基本的语法以后，我跃跃欲试，想要用GitBook来编写属于我的第一本电子书。于是我用谷歌搜索关键字GitBook安装，通过查阅相关资料，我懂得了GitBook是一个基于Node.js的命令行工具，因此要想安装GitBook必须要先安装Node.js。安装好以后，教程上让我输入命令，我才知道安装GitBook需要用到命令行，我以前从来没有接触过命令行，这是我第一次在命令行中输入命令。我严格地按照网页上的教程输入命令，但是很快就遇到了新的问题：我输入“$ npm install -g gitbook-cli”后，系统提示：“'$' 不是内部或外部命令，也不是可运行的程序或批处理文件。”我有些纳闷，我直接复制粘贴过来的命令怎么也会出错。我按照系统的提示，尝试着把命令前面的“$”删去再试一次，成功了，我这才明白原来教程里面的“$”是表示用户输入的意思。安装大概用了一分多钟的时间，我觉得这很神奇，因为我平时安装别的程序的时候都是用的可视化的安装程序，这次只用了一行短短的命令就安装成功了，这让我感受到了命令行的博大精深。

因为之后要用到GitHub，需要安装Git，所以在安装GitBook的时候我一并安装了Git，Git在国内下载速度极慢，需要用到VPN进行下载。Git也是一个命令行工具，但是相比起Windows自带的命令行工具来说，Git更加地方便，因为Windows的命令行需要不断地进入目录或返回上一级目录才能到达指定的文件夹，而Git只需要在想要的目录中右键点击空白处，选择“Git Bash Here”，就可以自动定位到当前目录了，非常方便。

参考文献：

https://ruby-china.org/topics/34627

https://www.bilibili.com/video/av26479800



### 二、尝试生成第一本电子书

GitBook安装好了以后，我尝试着制作第一本电子书。在电子书的目录中打开Git Bash，输入“gitbook init”在文件夹中初始化GitBook，文件夹中会生成两个文件，一个是README.md，另一个是SUMMARY.md，经过查询相关资料，我懂得了书本的第一页内容是从文件 README.md 中提取的。而文件 SUMMARY.md是用来定义书本的章节和子章节的结构的，被用来生成书本内容的预览表。在文件SUMMARY.md中加入每个章节的目录并链接到相应的文件，这样在部署到网页上面以后，点击章节的名称就可以直接跳转到相应的章节了。将文档写好以后，输入命令“gitbook serve”在本地生成网页，这个时候文件夹中会自动生成一个叫“_book”的文件夹，里面用来存放生成的网页，这些工作全部完成以后，在浏览器中输入localhost:4000/，就可以看到生成的电子书了。但是经过多次测试，我发现如果Markerdown文件中插入了当前目录中的图片，在Markdown编辑器中可以正确地看到这些图片，但是一旦生成电子书以后，在浏览器里面是看不到这些图片的，我尝试了好几次，都无法查看图片。在搜索引擎中搜索无果后，我尝试着自己解决这个问题。我将图片链接从相对路径改成绝对路径后再进行尝试，Markdown编辑器中可以看到图片，但是生成的电子书中依然看不到图片。我又试着将图片存放在一个单独的文件夹中，用相对路径去访问，这一次成功了，生成的电子书中能够正确看到图片。

参考文献：

https://chrisniael.gitbooks.io/gitbook-documentation/content/index.html



### 三、GitBook的部署

将电子书在本地生成了以后，经过预览，和我所预期的效果相同，接下来就要把电子书部署在网站上面了，这也是我觉得非常酷的部分。老师提供的参考资料里面说，将GitBook部署到GitHub Pages是很常见的，而且我看到参考资料里面只有短短的几行操作就完成了部署，看上去很简单快捷，然而，这对于之前从来没有接触过Git的我来说，还是需要很久的时间去学习。

首先学习如何把本地的电子书上传到GitHub的仓库里面。通过查阅相关资料，要在GitHub上面创建一个空的仓库test1，之后在本地通过命令行把电子书上传到GitHub上面。在电子书的目录里面输入命令“git init”从而在本地初始化一个Git代码库。之后输入命令“$ git remote add origin https://github.com/moonyoung1814/test1.git”来绑定刚刚创建好的仓库。绑定好仓库以后就可以把本地的项目文件全部添加到暂缓区了，输入命令“$ git add .”。下一步添加注释，输入命令“$ git commit -m 'test'”。最后一步就是最关键的一步了：把本地的文件推送到GitHub上面了，输入命令“$ git push -u origin master”就可以了。这些只是Git常用操作指令中的很小一部分，剩下的很多Git知识本项目中暂时还没有用到，我会在本学期的剩余时间里找到相应的教程进行学习的。

之后生成GitHub Pages。经过查阅相关的资料，现在的GitHub Pages不再支持git-pages分支，但仍然支持 master 分支的 /docs 目录，因此需要在生成电子书的时候，把生成的文件存放在目录下面的docs文件夹中，再把docs文件夹上传到仓库里。在仓库的设置里面找到GitHub Pages部分，在source中选择master branch/docs folder。之后稍等片刻，打开系统所提示的网址，就可以看到部署好的电子书了。参考资料中说这是可以绑定自定义域名的，但是因为我没有域名，因此还没有学习这一部分的知识，我会在之后的时间里搞一个域名尝试绑定电子书的。

参考文献：

https://www.jianshu.com/p/3d03ab330df5

https://www.bilibili.com/video/av26479800?t=63



### 四、GitHub团队协作

在完成了电子书的制作和部署以后，我就大概掌握了GitBook的最基本的操作了，之后的任务就是编写电子书中我所负责的那一部分并上传到老师的仓库了。通过对相关资料的查询，我大概懂得了GitHub里面团队协作的流程：先把要协作的项目fork到自己的仓库里面，之后对自己的仓库文件进行修改，修改好以后通过pull request把改动提交给项目的管理员，审核通过以后项目就被成功修改了。我并没有看懂老师提供的协作流程视频教程，于是我自己单独去网上寻找教程。根据教程，我下载了叫GitHub Desktop的一个可视化程序，在这个程序里面也可以对GitHub仓库进行操作，相比起命令行来说，我认为这个可视化的程序

更加直观，对像我这样的新手来说非常友好。我把老师的项目fork到自己的仓库，下载到本地，编写了我负责的章节，这个程序确实很方便，能够很直观的看到我对于项目的改动，提交也很便捷。在之后的学习中我会学习使用命令行来实现上述操作。最后pull request，整个过程非常的顺利。

在查阅资料的时候，我看到很多教程里面都提到了分支这个词，我不懂什么是分支，它有什么意义。为此我专门谷歌了一下GitHub的分支。通过相关文献，我明白了每个项目都应该有一个，且仅有一个主分支，所有提供给用户使用的正式版本，都在这个主分支上发布。主分支只用来分布重大版本，日常开发不应该直接在主分支上面进行，而应该在另一条分支上完成，叫develop，这个分支可以用来生成代码的最新隔夜版本（nightly）。如果想正式对外发布，就在Master分支上，对Develop分支进行"合并"（merge）。但是，除了常设分支以外，还有一些临时性分支，用于应对一些特定目的的版本开发。由此可见，分支功能对于项目开发人员来说是非常有用的，它可以使得版本库的演进保持简洁，主干清晰，各个分支各司其职、井井有条。

参考文献：

https://segmentfault.com/q/1010000006216219

http://www.ruanyifeng.com/blog/2012/07/git.html

https://blog.csdn.net/zhongzunfa/article/details/80344585

https://learnku.com/articles/30125



### 五、后续工作

前半个学期的学习中，我了解了GitBook的基本功能，懂得了如何安装、配置、部署电子书，并且对GItHub有了一个基本的认识和了解。在后半个学期里，我们将会把重点放在GitBook的插件上，包括对各种插件的试用并编写报告和学习插件的开发。